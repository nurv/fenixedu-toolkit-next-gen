{"version":3,"sources":["../../../src/js/toolkit/semver.js"],"names":[],"mappings":"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","file":"semver.js","sourcesContent":["class SemVer{\n  \n  constructor(version){\n    var match = /^[^\\d]*(\\d+)\\.(\\d+)(\\.(\\d+))?(.*)?/g.exec(version);\n\n    if (!match){\n      return null;\n    }\n\n    this.major    = parseInt(match[1]);\n    this.minor    = parseInt(match[2]);\n    this.revision = parseInt(match[4] || 0);\n\n    var rest = match[4];\n    if (rest){\n      if (rest == \"-SNAPSHOT\"){\n        this.snapshot = true;\n      }\n\n      match = rest.toUpperCase().match(/^[\\-\\.]?A(LPHA)?\\-?(\\d+)/);\n\n      if(match){\n        this.alpha = parseInt(match[2]);\n      }\n\n      match = rest.toUpperCase().match(/^[\\-\\.]?B(ETA)?[\\-\\.]?(\\d+)/);\n\n      if(match){\n        this.beta = parseInt(match[2]);\n      }\n\n      match = rest.toUpperCase().match(/^[\\-\\.]?RC(\\d+)/);\n\n      if(match){\n        this.releaseCandidate = parseInt(match[1]);\n      }\n\n      match = rest.toUpperCase().match(/^[\\-\\.]?M(\\d+)/);\n      if(match){\n        this.milestone = parseInt(match[1]);\n      }\n    }\n\n    this.version = version;\n  }\n\n  toString(){\n    return this.version;\n  }\n\n  cmp(that){\n    if (this.major !== that.major){\n      return this.major - that.major\n    }\n\n    if (this.minor !== that.minor){\n      return this.minor - that.minor\n    }\n\n    if (this.revision !== that.revision){\n      return this.revision - that.revision\n    }\n    var props = [\"alpha\",\"beta\",\"milestone\",\"releaseCandidate\",\"snapshot\"]\n    var k = 0;\n\n    var vThis = this;\n    var vThat = that;\n    var result;\n    $.map(props, function(p){\n      if(vThis[p]){\n        var l = k;\n        $.map(props, function(s){\n          if(vThat[s]){\n            if(s == p){\n              if (s === \"snapshot\"){\n                result = result || 0\n              }else{\n                result = result || vThis[p] -vThat[s];\n              }\n            }else{\n              result = result || l;\n            }\n          }\n          l -= 1;\n        });\n        result = result ||  l;\n      }\n      k += 1;\n    });\n    return result || 0;\n  }\n\n  before(version, cb){\n    if (typeof version === \"string\"){\n      version = new SemVer(version);\n    }\n\n    if(this.cmp(version) <= 0){\n      try{\n        cb(version);\n      }catch(e){\n        console.error(e);\n      }\n    }\n\n    return this;\n  }\n\n  after(version, cb){\n    if (typeof version === \"string\"){\n      version = new SemVer(version);\n    }\n\n    if(this.cmp(version) >= 0){\n      try{\n        cb(version);\n      }catch(e){\n        console.error(e);\n      }\n    }\n    \n    return this;\n  }\n\n  between(v1,v2, cb){\n    if (typeof v1 === \"string\"){\n      v1 = new SemVer(v1);\n    }\n\n    if (typeof v2 === \"string\"){\n      v2 = new SemVer(v2);\n    }\n\n    if(this.cmp(v1) >= 0 && this.cmp(v2) <= 0){\n      try{\n        cb(v1,v2);\n      }catch(e){\n        console.error(e);\n      }\n    }\n    \n    return this;\n  }\n}\n\n"]}